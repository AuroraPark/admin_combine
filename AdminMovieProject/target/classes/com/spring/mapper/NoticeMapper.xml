<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0.//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.notice.NoticeDAO">

	<resultMap type="com.spring.notice.BoardQnaVO" id="BoardQnaVO">
		<result property="qna_no" column="qna_no"/>
		<result property="id" column="id"/>
		<result property="qna_category" column="qna_category"/>
		<result property="qna_title" column="qna_title"/>
		<result property="qna_content" column="qna_content"/>
		<result property="qna_date" column="qna_date"/>
		<result property="qna_update_date" column="qna_update_date"/>
		<result property="qna_answer" column="qna_answer"/>
	</resultMap>
	<!-- hm | 1:1문의 답변 resultMap추가  	
	<resultMap type="com.spring.manage.MemberVO" id="MemberResultMap">
		<result property="id" column="id" />
		<result property="m_nickname" column="m_nickname" />
		<result property="m_image" column="m_image" />
		<result property="m_email" column="m_email" />
		<result property="m_eagree" column="m_eagree" />
		<result property="m_sagree" column="m_sagree" />
		<result property="m_name" column="m_name" />
		<result property="m_phone" column="m_phone" />
		<result property="m_cert" column="m_cert" />
		<result property="m_password" column="m_password" />
		<result property="m_regdate" column="m_regdate" />
		<result property="m_update_date" column="m_update_date" />
		<result property="m_deleteyn" column="m_deleteyn" />
		<result property="m_following" column="m_following" />
		<result property="m_follower" column="m_follower" />
		<result property="m_level" column="m_level" />
		<result property="m_favorite" column="m_favorite" />
		<result property="m_blacklist" column="m_blacklist" />
		<result property="m_authkey" column="m_authkey" />
	</resultMap>
-->

	<resultMap type="com.spring.notice.AdQnaVO" id="AdQnaVO">
		<result property="aqna_no" column="aqna_no"/>
		<result property="qna_no" column="qna_no"/>
		<result property="aqna_content" column="aqna_content"/>
		<result property="aqna_date" column="aqna_date"/>
		<result property="aqna_update_date" column="aqna_update_date"/>
		<result property="admin_num" column="admin_num"/>
	</resultMap>
		
	
	<!-- hm | 1:1문의 답변 resultMap추가  -->
	<resultMap type="com.spring.notice.AdNoticeVO" id="AdNoticeVO">
		<result property="an_code" column="an_code"/>
		<result property="admin_num" column="admin_num"/>
		<result property="an_content" column="an_content"/>
		<result property="an_title" column="an_title"/>
		<result property="an_reg_date" column="an_reg_date"/>
		<result property="an_update_date" column="an_update_date"/>
	</resultMap>
	


	<select id="noticeList" resultMap="AdNoticeVO">
        <![CDATA[
        SELECT *  
        FROM ad_notice
        WHERE an_code > 0
        ORDER BY an_code DESC
        ]]>
	</select>	
	
	<select id="qnaList" resultMap="BoardQnaVO">
        <![CDATA[
        SELECT *  
        FROM board_qna
        WHERE qna_no > 0
        ORDER BY qna_no DESC
        ]]>
	</select>
	
	<!-- notice write -->
	<select id="getAdminName" parameterType="int" resultType="String">
		select admin_name from ad_member where admin_num=#{admin_num}
	</select>
	
	<!-- insert : insertNotice -->
	<insert id="insertNotice" parameterType="com.spring.notice.AdNoticeVO">
		INSERT INTO ad_notice VALUES (seq_ad_notice_no.nextval, #{admin_num}, #{an_content, jdbcType=VARCHAR},  #{an_title, jdbcType=VARCHAR},
            sysdate, sysdate)
	</insert>
	<!--  detail 가져오기 -->
	<select id="noticeDetail" parameterType="int" resultType="com.spring.notice.AdNoticeVO">
		select * from ad_notice where an_code=#{an_code}
	</select>
	
	
	<!--  detail 질문 가져오기 -->
	<select id="boardQnaDetail" parameterType="int" resultType="com.spring.notice.BoardQnaVO">
		select * from board_qna where QNA_NO=#{qna_no}
	</select>
	
		<!--  detail 답변 가져오기 -->
	<select id="adQnaDetail" parameterType="int" resultType="com.spring.notice.AdQnaVO">
		select * from ad_qna where QNA_NO=#{qna_no}
	</select>
	
</mapper>
